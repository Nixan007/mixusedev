<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Real Estate Proposal - Landmark Development Pvt Ltd</title>

  <!-- Google Font: Montserrat -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      /* Dark Mode Variables */
      --background-color: #1F2933;
      --card-color: #222B35;
      --accent-color: #0EAC9F; /* Changed from gold to a teal color for better contrast */
      --text-color: #F4F6F8;
      --border-color: #333B47;
      --font-family: 'Montserrat', sans-serif;

      /* Slider dimension */
      --slider-width: 600px;
      --slider-height: 300px;
    }

    /* Light Mode Variables */
    .light-mode {
      --background-color: #FFFFFF; /* White background */
      --card-color: #F9F9F9; /* Light card */
      --accent-color: #DAA520; /* Bright Gold */
      --text-color: #333333; /* Dark text */
      --border-color: #E0E0E0; /* Light border */
    }

    /* RESET & BODY */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: var(--font-family);
      background-color: var(--background-color);
      color: var(--text-color);
      line-height: 1.6;
      scroll-behavior: smooth;
      overflow-x: hidden;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    a {
      text-decoration: none;
      color: var(--accent-color);
      transition: color 0.3s ease;
    }
    a:hover {
      text-decoration: underline;
    }

    /* COVER PAGE */
    .cover-page {
  min-height: 100vh;
  background: url("https://github.com/Nixan007/mixusedev/blob/main/Left_Side.JPG") no-repeat bottom center/cover; /* Background image */
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  color: var(--text-color);
  padding: 3rem 1.5rem;
  position: relative;
  overflow: hidden;
  transition: background 0.3s ease;
}

/* Semi-transparent overlay */
.cover-page::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.3); /* White overlay with 20% transparency */
  z-index: 1; /* Ensure it sits above the background image */
}

/* Content above the overlay */
.cover-page > * {
  position: relative;
  z-index: 2; /* Ensure content is above the overlay */
}

    .cover-page h1 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 1.2s ease forwards 0.2s;
      color: var(--accent-color);
    }
    /* Adjust h1 color in dark mode */
    body:not(.light-mode) .cover-page h1 {
      color: var(--text-color);
    }
    body.light-mode .cover-page h1 {
      color: #282828; /* Changed from var(--accent-color) to dark gray for better readability */
    }
    .cover-page p {
      max-width: 600px;
      margin: 0.5rem auto;
      line-height: 1.6;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 1.2s ease forwards 0.5s;
    }
    .btn-cover {
      margin-top: 2rem;
      background-color: var(--accent-color);
      color: #FFFFFF;
      font-weight: 700;
      padding: 0.8rem 1.5rem;
      border-radius: 4px;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s ease;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 1.2s ease forwards 0.8s;
    }
    .btn-cover:hover {
      background-color: #0D8C86; /* Darker teal on hover */
    }

    /* HEADER & NAV */
    header {
      background-color: var(--background-color);
      padding: 1rem 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      transition: background-color 0.3s ease;
    }
    .logo {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--accent-color);
    }
    nav ul {
      list-style: none;
      display: flex;
      gap: 1rem;
    }
    nav ul li a {
      color: var(--text-color);
      font-weight: 600;
      transition: color 0.3s ease;
    }
    nav ul li a:hover {
      color: var(--accent-color);
    }

    /* Theme Toggle */
    .theme-toggle {
      display: flex;
      align-items: center;
      cursor: pointer;
    }
    .theme-toggle input {
      display: none;
    }
    .theme-toggle label {
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      position: relative;
      width: 50px;
      height: 24px;
      background-color: #ccc;
      border-radius: 12px;
      transition: background-color 0.3s ease;
    }
    .theme-toggle label::before {
      content: 'üåô'; /* Moon icon */
      position: absolute;
      left: 6px;
      font-size: 16px;
    }
    .theme-toggle label::after {
      content: '‚òÄÔ∏è'; /* Sun icon */
      position: absolute;
      right: 6px;
      font-size: 16px;
    }
    .theme-toggle input:checked + label {
      background-color: var(--accent-color);
    }
    .theme-toggle input:checked + label::after {
      transform: translateX(26px);
    }

    /* Sections */
    section {
      max-width: 1200px;
      margin: 2rem auto;
      padding: 0 1.5rem;
    }
    section h2 {
      font-size: 1.8rem;
      margin-bottom: 1rem;
      border-left: 5px solid var(--accent-color);
      padding-left: 0.5rem;
      color: var(--text-color);
    }
    .section-content {
      background-color: var(--card-color);
      padding: 1.5rem;
      border-radius: 6px;
      border: 1px solid var(--border-color);
      margin-bottom: 2rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }
    .section-content h3 {
      color: var(--accent-color);
      margin-top: 1rem;
      font-weight: 600;
    }

    /* Two-Column Layout */
    .pricing-container {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
    }
    .pricing-column {
      flex: 1 1 300px;
      background-color: var(--card-color);
      padding: 1rem;
      border-radius: 6px;
      border: 1px solid var(--border-color);
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }
    .pricing-column h4 {
      margin-bottom: 0.5rem;
      color: var(--accent-color);
    }

    /* Tables */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
      color: var(--text-color);
    }
    table th, table td {
      text-align: left;
      padding: 0.75rem;
      border-bottom: 1px solid var(--border-color);
    }
    table thead {
      background-color: var(--accent-color); /* Muted Gold in Dark Mode */
      color: #FFFFFF;
    }
    /* Adjust table header color in light mode if needed */
    body.light-mode table thead {
      background-color: var(--accent-color);
      color: #FFFFFF;
    }

    /* Buttons */
    .btn {
      display: inline-block;
      padding: 0.6rem 1.2rem;
      border: none;
      border-radius: 4px;
      background-color: var(--accent-color);
      color: #FFFFFF;
      font-weight: 600;
      margin-top: 1rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .btn:hover {
      background-color: #0D8C86; /* Darker teal on hover */
    }

    /* Mortgage & Toggles */
    #tenYearBreakdown {
      display: none;
      margin-top: 1rem;
      background-color: var(--card-color);
      padding: 1rem;
      border-radius: 6px;
      border: 1px solid var(--border-color);
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }
    #mortgageSection {
      display: none;
      margin-top: 1rem;
      background-color: var(--card-color);
      padding: 1rem;
      border-radius: 6px;
      border: 1px solid var(--border-color);
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }
    .mortgage-inputs {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-top: 1rem;
      max-width: 500px;
    }
    .downPaymentContainer {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    #downPaymentRange {
      flex: 1; 
      cursor: pointer;
    }
    #downPaymentLabel {
      min-width: 45px;
      text-align: right;
      color: var(--text-color);
    }
/* Center the image gallery */
.image-gallery {
  display: flex;
  flex-wrap: wrap;
  justify-content: center; /* Centers images horizontally */
  align-items: center; /* Centers images vertically */
  gap: 20px; /* Space between images */
  padding: 20px;
  height: 40vh; /* Makes the gallery area vertical-centered */
  box-sizing: border-box;
}

/* Keep images the same size as they were in the slider */
.image-gallery img {
  width: 400px; /* Same width as in the slider */
  height: 300px; /* Maintain aspect ratio */
  cursor: pointer;
  transition: transform 0.3s ease;
}

/* Slight zoom effect on hover */
.image-gallery img:hover {
  transform: scale(1.05);
}

/* Lightbox styles */
.lightbox {
  display: none; /* Hidden by default */
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.05); /* 95% transparent background */
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.lightbox img {
  max-width: 80%;
  max-height: 80%; /* The image fills 80% of the screen */
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
  border-radius: 8px;
}

.lightbox .close-btn {
  position: absolute;
  top: 20px;
  right: 20px;
  font-size: 24px;
  color: #fff;
  background: rgba(0, 0, 0, 0.5);
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: background 0.3s;
}

.lightbox .close-btn:hover {
  background: rgba(0, 0, 0, 0.8);
}

    /* Slider for images */
    .slider-container {
      width: var(--slider-width);
      height: var(--slider-height);
      margin: 1rem auto;
      overflow: hidden;
      position: relative;
      /* Removed border */
      border: none;
      border-radius: 6px;
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.6s ease, transform 0.6s ease;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      background-color: var(--card-color);
    }
    .slider-wrapper {
      display: flex;
      width: calc(var(--slider-width) * 4);
      height: var(--slider-height);
      transition: transform 0.6s ease;
    }
    .slider-slide {
      width: var(--slider-width);
      height: var(--slider-height);
      flex-shrink: 0;
      position: relative;
    }
    .slider-slide img {
      width: 100%;
      height: 100%;
      object-fit: contain; /* Changed to contain for better image display */
      opacity: 0;
      animation: fadeInSlide 0.8s forwards;
      border-radius: 6px;
      /* Removed border */
      border: none;
    }
    .slider-nav {
      position: absolute;
      top: 50%;
      width: 100%;
      display: flex;
      justify-content: space-between;
      transform: translateY(-50%);
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }
    .slider-container:hover .slider-nav {
      opacity: 1;
      visibility: visible;
    }
    .slider-nav button {
      background-color: rgba(14, 172, 159, 0.8); /* Semi-transparent teal */
      color: #FFFFFF;
      border: none;
      font-size: 1.2rem;
      padding: 0.5rem 1rem;
      cursor: pointer;
      border-radius: 4px;
      transition: background-color 0.3s ease;
      /* Initially hidden */
      opacity: 0;
      visibility: hidden;
    }
    .slider-container:hover .slider-nav button {
      opacity: 1;
      visibility: visible;
    }
    .slider-nav button:hover {
      background-color: rgba(13, 140, 134, 0.8); /* Darker teal on hover */
    }

    /* Footer */
    footer {
      background-color: var(--background-color);
      text-align: center;
      padding: 1rem 1.5rem;
      color: var(--text-color);
      position: relative;
      box-shadow: 0 -2px 4px rgba(0,0,0,0.05);
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    /* Print Button (placed near the footer) */
    .print-btn {
      display: inline-block;
      margin-top: 1rem;
      background-color: var(--accent-color);
      color: #FFFFFF;
      font-weight: 600;
      border: none;
      border-radius: 4px;
      padding: 0.6rem 1.2rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .print-btn:hover {
      background-color: #0D8C86; /* Darker teal on hover */
    }

    /* Animations */
    @keyframes fadeInUp {
      0% {
        opacity: 0;
        transform: translateY(20px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    @keyframes fadeInSlide {
      0% {
        opacity: 0;
      }
      100% {
        opacity: 1;
      }
    }

    /* Our "reveal" class for IntersectionObserver */
    .reveal {
      opacity: 0; 
      transform: translateY(20px);
      transition: opacity 0.8s ease, transform 0.8s ease;
    }
    .reveal.active {
      opacity: 1;
      transform: translateY(0);
    }

    /* Once the .slider-container has the "active" class, it fades in */
    .slider-container.active {
      opacity: 1;
      transform: translateY(0);
    }

    /****************************************************
     * @media print: Make it A4-friendly
     ****************************************************/
    @media print {
      @page {
        size: A4;
        margin: 20mm;
      }
      /* Hide certain interactive elements if desired */
      .btn, .btn-cover, .print-btn, .slider-nav, .theme-toggle {
        display: none !important;
      }
      /* You might also hide the nav bar or other UI only items */
      header {
        display: none;
      }
      /* Ensure your background doesn't print unless you want it to */
      body {
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
    }

    /* Responsive */
    @media screen and (max-width: 768px) {
      nav ul {
        flex-direction: column;
        gap: 0.5rem;
      }
      .mortgage-inputs {
        grid-template-columns: 1fr;
      }
      .slider-container {
        width: 100%;
        max-width: 95%;
        height: auto;
      }
      .slider-wrapper {
        width: calc(var(--slider-width) * 2); /* Adjusted for fewer slides on mobile */
      }
      .pricing-container {
        flex-direction: column;
      }
    }
  </style>
</head>
<body class="dark-mode" onload="init()">

  <!-- HEADER -->
  <header>
    <div class="logo">Landmark Development Pvt Ltd</div>
    <nav>
      <ul>
        <li><a href="#execSummary">Summary</a></li>
        <li><a href="#location">Location</a></li>
        <li><a href="#pricing">Pricing</a></li>
        <li><a href="#roiSection">ROI</a></li>
        <li><a href="#exit">Exit Strategy</a></li>
        <li><a href="#timeline">Timeline</a></li>
        <li><a href="#nextSteps">Contact Us</a></li>
      </ul>
    </nav>
    <!-- Theme Toggle -->
    <div class="theme-toggle">
      <input type="checkbox" id="themeSwitch">
      <label for="themeSwitch"></label>
    </div>
  </header>

  <!-- COVER PAGE -->
  <div class="cover-page">
    <h1>Mix Use Development</h1>
    <p>
      We proudly present this unique mixed-use building in Mal√©, Maldives. 
      Discover our flexible floor options, robust ROI, and easy financing solutions.
    </p>
    <button class="btn-cover" onclick="document.getElementById('execSummary').scrollIntoView({behavior:'smooth'})">
      View Proposal
    </button>
  </div>

  
  <!-- SECTION 1: EXEC SUMMARY -->
  <section id="execSummary" class="reveal">
    <h2>Executive Summary</h2>
    <div class="section-content">
      <p>
        <strong>Property Overview:</strong> This 15-story building offers 9 floors 
        for sale in prime Mal√©. Strategically located near MPL, Customs, and main 
        wholesale markets. Suitable for diverse commercial or residential usage.
      </p>
      <p style="margin-top:1rem;">
        <strong>Investment Potential:</strong> Mal√©‚Äôs thriving real estate market 
        ensures stable rental income, plus capital appreciation potential. 
        Floors can accommodate clinics, caf√©s, gyms, offices, or apartments.
      </p>
    </div>
  </section>

  <!-- SECTION 2: LOCATION & DEVELOPMENT DETAILS -->
  <section id="location" class="reveal">
    <h2>Location &amp; Development Details</h2>
    <div class="section-content">
      <div class="site-container" style="display: flex; flex-wrap: wrap; gap: 2rem;">
        <!-- Column 1: General Details -->
        <div class="site-column" style="flex:1 1 300px; background-color: var(--card-color); padding:1rem; border-radius:6px; border:1px solid var(--border-color); box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
          <h4 style="margin-bottom:0.5rem; color:var(--accent-color);">General Info</h4>
          <ul style="line-height:1.7;">
            <li>Land Area: <strong>2,850 sqft</strong></li>
            <li>Floor Area (gross): <strong>2,850 sqft</strong> typical floors</li>
            <li>Usable Rental: <strong>2,273 sqft</strong> per floor</li>
            <li>Building will have 2 Lifts to cater to multiple clients</li>
            <li>Building has a dedicated garbage area and a fire pump system along with its own transformer system for stable power supply</li>
          </ul>
        </div>

        <!-- Column 2: Floor Breakdown -->
        <div class="site-column" style="flex:1 1 300px; background-color: var(--card-color); padding:1rem; border-radius:6px; border:1px solid var(--border-color); box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
          <h4 style="margin-bottom:0.5rem; color:var(--accent-color);">Floor Breakdown &amp; Usage</h4>
          <ul style="line-height:1.7;">
            <li>Ground+Basement+Mezz: <strong>~4,000 sqft</strong></li>
            <li>Floors 1‚Äì8: <strong>2,850 sqft each</strong> (2,273 usable)</li>
            <li>All 9 floors: <strong>~25,650 sqft total</strong></li>
          </ul>
          <p style="margin-top:1rem;">
            <em>Flexible usage:</em> Clinics, caf√©s, restaurants, gyms, offices, or apartments 
            (local restrictions apply). Landmark offers <strong>discounted interior renovation</strong> 
            if needed.
          </p>
        </div>
      </div>

      <h3>Maps</h3>
      <div class="image-gallery">
        <img src="https://i.postimg.cc/5989ZrH0/temp-Image-LRSpot.avif" alt="Image 1" onclick="openLightbox(this)">
        <img src="https://i.postimg.cc/vHzYm6tw/temp-Image-B3-Ft-H6.avif" alt="Image 2" onclick="openLightbox(this)">
          </div>
          <div id="lightbox" class="lightbox" onclick="closeLightbox(event)">
            <img id="lightbox-img" src="" alt="Expanded Image">
            <button class="close-btn" onclick="closeLightbox(event)">√ó</button>
          </div>

      <h3>Ground Floor Drawings</h3>
      <div class="image-gallery">
        <img src="https://github.com/Nixan007/mixusedev/blob/main/Gf%20op%201.png" alt="Drawing 1" onclick="openLightbox(this)">
        <img src="https://github.com/Nixan007/mixusedev/blob/main/GF%20op%202.png" alt="Drawing 2" onclick="openLightbox(this)">
      
          </div>
          <div id="lightbox" class="lightbox" onclick="closeLightbox(event)">
            <img id="lightbox-img" src="" alt="Expanded Image">
            <button class="close-btn" onclick="closeLightbox(event)">√ó</button>
          </div>
    <h3>Mezzanine Drawings</h3>
      <div class="image-gallery">
        
        <img src="https://github.com/Nixan007/mixusedev/blob/main/Mez%20op%201.png" alt="Drawing 3" onclick="openLightbox(this)">
        <img src="https://github.com/Nixan007/mixusedev/blob/main/Mez%20Op%202.png" alt="Drawing 4" onclick="openLightbox(this)">
        
          </div>
          <div id="lightbox" class="lightbox" onclick="closeLightbox(event)">
            <img id="lightbox-img" src="" alt="Expanded Image">
            <button class="close-btn" onclick="closeLightbox(event)">√ó</button>
          </div>
<h3>Typical Floor Drawings</h3>
      <div class="image-gallery">
        <img src="https://github.com/Nixan007/mixusedev/blob/main/3%20to%209%20op%201.png" alt="Drawing 5" onclick="openLightbox(this)">
        <img src="https://github.com/Nixan007/mixusedev/blob/main/3%20to%209%20optn%202.png" alt="Drawing 6" onclick="openLightbox(this)">
          </div>
          <div id="lightbox" class="lightbox" onclick="closeLightbox(event)">
            <img id="lightbox-img" src="" alt="Expanded Image">
            <button class="close-btn" onclick="closeLightbox(event)">√ó</button>
          </div>

      <h3>Renders</h3>
      <div class="image-gallery">
            <img src="https://i.postimg.cc/XvDvJgsZ/temp-Imagee-D8pz-F.avif" alt="Render" onclick="openLightbox(this)">
          </div>
          <div id="lightbox" class="lightbox" onclick="closeLightbox(event)">
            <img id="lightbox-img" src="" alt="Expanded Image">
            <button class="close-btn" onclick="closeLightbox(event)">√ó</button>
          </div>

      <!-- Nearby Places -->
      <h3>Nearby Places & Travel Distances</h3>
      <div class="site-container" style="display: flex; flex-wrap: wrap; gap: 2rem;">
        <!-- Column 1: Key Locations -->
        <div class="site-column" style="flex: 1 1 300px; background-color: var(--card-color); padding: 1rem; border-radius: 6px; border: 1px solid var(--border-color); box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
          <h4 style="margin-bottom: 0.5rem; color:var(--accent-color);">Key Locations</h4>
          <ul style="line-height: 1.7;">
            <li><strong>Civil Court</strong> - <span style="color: var(--accent-color);">5 min drive</span></li>
            <li><strong>Maldives Customs Service</strong> - <span style="color: var(--accent-color);">8 min walk</span></li>
            <li><strong>Maldives Ports Limited</strong> - <span style="color: var(--accent-color);">9 min walk</span></li>
            <li><strong>STO Trade Center</strong> - <span style="color: var(--accent-color);">10 min walk</span></li>
            <li><strong>AMDC Clinic</strong> - <span style="color: var(--accent-color);">2 min walk</span></li> 
          </ul>
        </div>
        <!-- Column 2: Transport & Connectivity -->
        <div class="site-column" style="flex: 1 1 300px; background-color: var(--card-color); padding: 1rem; border-radius:6px; border:1px solid var(--border-color); box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
          <h4 style="margin-bottom: 0.5rem; color:var(--accent-color);">Transport & Connectivity</h4>
          <ul style="line-height: 1.7;">
            <li><strong>Jetty No. 1 (Ferries & Boats)</strong> - <span style="color: var(--accent-color);">7 min walk</span></li>
            <li><strong>Velana International Airport</strong> - <span style="color: var(--accent-color);">10 min drive</span></li>
            <li><strong>Bus Station</strong> - <span style="color: var(--accent-color);">6 min walk</span></li>
            <li><strong>Sinamale Bridge Access</strong> - <span style="color: var(--accent-color);">9 min drive</span></li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- SECTION 3: PRICING & PAYMENT -->
  <section id="pricing" class="reveal">
    <h2>Pricing &amp; Payment</h2>
    <div class="section-content">
      <div class="pricing-container">
        <!-- Column 1: Pricing -->
        <div class="pricing-column">
          <h4>Sale Prices (Incl. GST for ROI)</h4>
          <ul style="line-height:1.7;">
            <li>Floors 1‚Äì8: <strong>MVR 6.5m +8%</strong> ‚Üí ~MVR 7.02m each</li>
            <li>Ground+Basement+Mezz: <strong>MVR 13.5m +8%</strong> ‚Üí ~MVR 14.58m</li>
            <li>All 9 Floors: <strong>MVR 60.5m +8%</strong> ‚Üí ~MVR 65.34m</li>
          </ul>
          <p style="margin-top:0.5rem;font-size:0.9rem;">
            *ROI calculations assume these GST-inclusive amounts as total cost.
          </p>
        </div>

        <!-- Column 2: Payment & Financing -->
        <div class="pricing-column">
          <h4>Payment &amp; Financing</h4>
          <ul style="line-height:1.7;">
            <li><strong>Cash Option:</strong> 20% down, remainder on milestones</li>
            <li><strong>Bank Financing:</strong> ~10.5% over 15‚Äì20 years</li>
            <li><strong>Legal Fee:</strong> MVR 100,000 upon ownership change</li>
          </ul>
          <p style="margin-top:0.5rem;font-size:0.9rem;">
            For mortgage estimates, see the <strong>Mortgage Calculator</strong> below.
          </p>
        </div>
      </div>
    </div>
  </section>

  

  <!-- SECTION 4: ROI & RENTAL PROJECTIONS -->
  <section id="roiSection" class="reveal">
    <h2>ROI &amp; Rental Projections</h2>
    <div class="section-content">
      <ul style="line-height:1.7;">
        <li>We apply a discrete <strong>2% vacancy loss every 3 years</strong> (Years 3, 6, 9...).</li> 
        <li>Rents rise 2% every 2 years.</li> 
        <li>Maintenance is MVR 1,500/month/floor.</li> 
        <li>Management fee (2%) is optional.</li>
      </ul>
      <div style="margin-bottom:1rem;">
        <label>
          <input type="checkbox" id="mgmtFeeToggle"> 
          2% Management &amp; Rental Collection Fee
        </label>
        <br>
        <label style="margin-top:0.5rem;">
          <input type="checkbox" id="renovationToggle">
          Estimated Renovation (~MVR 2 million)
        </label>
      </div>
      <div style="margin:0.5rem 0;">
        <label for="floorSelector"><strong>Select Floor Package:</strong></label>
        <select id="floorSelector" style="margin-left:0.5rem;">
          <option value="floorRegular">Typical Floor (~7.02m GST)</option>
          <option value="floorGround">Ground+Mezz (~14.58m GST)</option>
          <option value="fullProperty">All 9 Floors (~65.34m GST)</option>
        </select>
      </div>
      <p>
        <strong>Total Usable Sqft:</strong> <span id="totalSqftDisplay">2,273</span> sqft
      </p>

      <!-- ROI Table -->
      <table id="roiTable" style="margin-top:1.5rem;">
        <thead>
          <tr>
            <th>Scenario <br><small>(Sqft Price)</small></th>
            <th>Monthly Rent</th>
            <th>Annual Rent</th>
            <th>Net Income</th>
            <th>Annual ROI (%)</th>
            <th><strong>Recovery (yrs)</strong></th>
          </tr>
        </thead>
        <tbody><!-- Inserted by JS --></tbody>
      </table>

      <!-- 10-Year Breakdown -->
      <button class="btn" style="margin-top:1.5rem;" onclick="toggleTenYearBreakdown()">
        View 10-Year Detailed Breakdown
      </button>
      <div id="tenYearBreakdown">
        <h3>10-Year Detailed Breakdown</h3>
        <p>
          Except for the Monthly Rent, all other figures stated are on a yearly basis.
        </p>
        <div id="tenYearTables"></div>
      </div>
    </div>
  </section>

  <!-- SECTION 5: RESALE & EXIT STRATEGY -->
  <section id="exit" class="reveal">
    <h2>Resale &amp; Exit Strategy</h2>
    <div class="section-content">
      <p>
        Below are short, mid, and long-term hold scenarios.
      </p>
      <div id="exitShortTerm" style="margin-top:1rem;">
        <h3>Short-Term (Years 3‚Äì8)</h3>
        <table>
          <thead>
            <tr>
              <th>Scenario</th>
              <th>Holding (yrs)</th>
              <th>Total Net Rent</th>
              <th>Resale Price</th>
              <th>Profit</th>
            </tr>
          </thead>
          <tbody id="shortTermBody"><!-- Insert rows --></tbody>
        </table>
      </div>

      <div id="exitMidTerm" style="margin-top:1rem;">
        <h3>Mid-Term (Years 8‚Äì18) [15 years]</h3>
        <table>
          <thead>
            <tr>
              <th>Scenario</th>
              <th>Holding (yrs)</th>
              <th>Total Net Rent</th>
              <th>Resale Price</th>
              <th>Profit</th>
            </tr>
          </thead>
          <tbody id="midTermBody"><!-- Insert rows --></tbody>
        </table>
      </div>

      <div id="exitLongTerm" style="margin-top:1rem;">
        <h3>Long-Term (Years 18‚Äì30) [25 years]</h3>
        <table>
          <thead>
            <tr>
              <th>Scenario</th>
              <th>Holding (yrs)</th>
              <th>Total Net Rent</th>
              <th>Resale Price</th>
              <th>Profit</th>
            </tr>
          </thead>
          <tbody id="longTermBody"><!-- Insert rows --></tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- SECTION 6: CONSTRUCTION TIMELINE -->
  <section id="timeline" class="reveal">
    <h2>Construction Timeline</h2>
<div class="section-content">
    <table>
        <thead>
            <tr>
                <th>Period</th>
                <th>Construction Milestone</th>
                <th>Billing Percentage</th>
                <th>Payment Due</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Q4 2023</td>
                <td>Agreement Signed</td>
                <td>-</td>
                <td>-</td>
            </tr>
            <tr>
                <td>Q4 2024</td>
                <td>Drawings Submitted for Approval</td>
                <td>-</td>
                <td>-</td>
            </tr>
            <tr>
                <td>Q3 2025</td>
                <td>Demolition & Design Finalization, Site Mobilization</td>
                <td>20%</td>
                <td>Start of construction</td>
            </tr>
            <tr>
                <td>Q4 2025</td>
                <td>Basement & Foundation Works, Partial Floor Slabs</td>
                <td>15%</td>
                <td>Upon completion of foundations</td>
            </tr>
            <tr>
                <td>Q1 2026</td>
                <td>Concrete Slab Works (Floors 1-4), Fa√ßade Prep</td>
                <td>15%</td>
                <td>Upon completion of 4th floor</td>
            </tr>
            <tr>
                <td>Q2 2026</td>
                <td>Floors 5-8, Fa√ßade Cladding & Finishing</td>
                <td>15%</td>
                <td>Upon completion of 8th floor</td>
            </tr>
            <tr>
                <td>Q3 2026</td>
                <td>Plumbing, Lift Installation, Doors & Windows</td>
                <td>15%</td>
                <td>Upon completion of core services</td>
            </tr>
            <tr>
                <td>Q4 2026</td>
                <td>Interior Works, Electrical & MEP</td>
                <td>10%</td>
                <td>Upon MEP completion</td>
            </tr>
            <tr>
                <td>Q1 2027</td>
                <td>Final Fa√ßade Finishing, Commissioning, Handover</td>
                <td>10%</td>
                <td>Upon final handover</td>
            </tr>
        </tbody>
    </table>

    <p class="notes">
        <em>Early possession</em> for completed floors is possible to start fit-out or rentals. All payments are subject to work completion verification.
    </p>
</div>
  </section>

  <!-- SECTION: WHY INVEST? -->
  <section id="whyInvest" class="reveal">
    <h2>Why Invest in This Property?</h2>
    <div class="section-content">
      <p>
        Investing in this premium property offers a unique opportunity to secure high returns in the thriving Mal√© real estate market.
        Here‚Äôs why this project stands out:
      </p>
      <ul style="line-height:1.7;">
        <li><strong>Prime Location:</strong> Situated near Mal√©‚Äôs key business hubs and transport links.</li>
        <li><strong>High Rental Yield:</strong> Projected rental returns of <strong>8% - 12%</strong> annually.</li>
        <li><strong>Capital Appreciation:</strong> Property values in Mal√© have increased by <strong>5-8% per year</strong>.</li>
        <li><strong>Strong Developer Track Record:</strong> Landmark Development has successfully delivered multiple high-end projects.</li>
        <li><strong>Flexible Payment Plans:</strong> Multiple financing options available, including bank mortgage support.</li>
        <li><strong>Turnkey Investment:</strong> Fully managed property with optional rental management services.</li>
      </ul>
    </div>
  </section>

  <!-- SECTION: NEXT STEP -->
  <section id="nextSteps" class="reveal">
    <h2>How to Get Involved</h2>
    <div class="section-content">
      <p>
        Ready to invest?
      </p>
      <div class="pricing-container">
        <!-- Step 1 -->
        <div class="pricing-column">
          <h4>Step 1: Schedule a Consultation</h4>
          <p>Contact our investment team to discuss pricing, financing, and available units.</p>
          <button class="btn" onclick="window.location.href='mailto:a@landmark.com.mv'">Contact Us</button>
        </div>

      <p style="margin-top:1rem;">
        <em>For inquiries, email us at <a href="mailto:a@landmark.com.mv">a@landmark.com.mv</a> or call <strong>+960 XXXX XXXX</strong>.</em>
      </p>
    </div>
  </section>
<!-- MORTGAGE SECTION -->
<section id="mortgageCalc" class="reveal">
  <h2>Mortgage Calculator</h2>
  <div class="section-content">
    <p>
      Estimate monthly installments with GST-inclusive prices. Adjust your 
      down payment from 0‚Äì100% (default 20%).
    </p>
    <!-- Down Payment Box -->
    <div class="pricing-container" style="margin-bottom:1rem;">
      <div class="pricing-column" id="downPaymentInfo">
        <h4>Equity &amp; Financing</h4>
        <div class="downPaymentContainer">
          <label for="downPaymentRange">Down Payment (%):</label>
          <input type="range" id="downPaymentRange" min="0" max="100" value="20" />
          <span id="downPaymentLabel">20%</span>
        </div>
        <p style="margin-top:1rem;">
          <strong>Loan Amount:</strong> <span id="loanAmount">--</span> MVR<br/>
          <strong>Equity:</strong> <span id="equityAmount">--</span> MVR
        </p>
      </div>
    </div>

    <button class="btn" onclick="toggleMortgage()">View Mortgage Table</button>
    <div id="mortgageSection">
      <div class="mortgage-inputs">
        <div>
          <label for="mortgageOption"><strong>Property Option</strong></label>
          <select id="mortgageOption">
            <option value="fullProp">All 9 Floors (~65.34m inc. GST)</option>
            <option value="ground">Ground Floor (~14.58m inc. GST)</option>
            <option value="typical">Typical Floor (~7.02m inc. GST)</option>
          </select>
        </div>
        <div>
          <label for="interestRate"><strong>Interest Rate (%)</strong></label>
          <input type="number" id="interestRate" value="10.5" />
        </div>
        <div>
          <label for="loanYears"><strong>Loan Duration (yrs)</strong></label>
          <input type="number" id="loanYears" value="15" />
        </div>
        <div>
          <button class="btn" onclick="buildMortgageTable()">Calculate</button>
        </div>
      </div>

      <!-- Mortgage Summary Row (above table) -->
      <div id="mortgageSummaryRow" style="background-color: var(--card-color); margin-top:1rem; padding:1rem; border-radius:6px; border:1px solid var(--border-color); box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
        <p id="mortgageSummaryText" style="margin:0; font-weight:600;"></p>
      </div>
      
      <table id="mortgageTable" style="margin-top:1rem;">
        <thead>
          <tr>
            <th>Month</th>
            <th>Payment (MVR)</th>
            <th>Interest</th>
            <th>Principal</th>
            <th>Balance</th>
          </tr>
        </thead>
        <tbody>
          <!-- Insert monthly rows here -->
        </tbody>
      </table>
    </div>
  </div>
</section>
  <!-- FOOTER -->
  <footer>
    <p>&copy; 2025 Landmark Development Pvt Ltd | 
      <a href="mailto:a@landmark.com.mv" style="color:var(--text-color);">a@landmark.com.mv</a>
    </p>
    <!-- Print Button -->
    <button class="print-btn" onclick="window.print()">
      Print This Proposal
    </button>
  </footer>

  <!-- JavaScript: ROI, Toggles, Discrete Vacancy, Mortgage, etc. -->
  <script>
    /************************************************************
     * 1. Basic Data & Pricing
     ************************************************************/
    const scenarioRates = { Low:25, Base:40, High:50 };
    const floorPackages = {
      floorRegular: { sqft:2273, purchasePrice:7020000 },
      floorGround:  { sqft:4000, purchasePrice:14580000 },
      fullProperty: { sqft: (2273*8 + 4000), purchasePrice:65340000 }
    };
    const mgmtFeeRate=2,
          renovationCost=2000000,
          monthlyMaintenanceFee=1500,
          rentIncreaseRate=0.02;

    // Discrete 2% vacancy every 3rd year
    function getVacancyLoss(year, annualRent) {
      return (year%3===0) ? (annualRent*0.02) : 0;
    }

    /************************************************************
     * 2. MAIN ROI TABLE
     ************************************************************/
    function updateROI() {
      const floorKey= document.getElementById('floorSelector').value;
      const floorData= floorPackages[floorKey];
      const mgmtActive= document.getElementById('mgmtFeeToggle').checked;
      const renovationActive= document.getElementById('renovationToggle').checked;

      document.getElementById('totalSqftDisplay').textContent= floorData.sqft.toLocaleString();

      let totalPurchase= floorData.purchasePrice;
      if(renovationActive) totalPurchase+= renovationCost;

      const roiTableBody= document.querySelector('#roiTable tbody');
      roiTableBody.innerHTML= '';

      Object.entries(scenarioRates).forEach(([scenarioName, sqftPrice])=>{
        let monthlyRent= sqftPrice * floorData.sqft;
        let annualRent= monthlyRent * 12;
        // No discrete vacancy in Year1 summary row
        let vacancyLoss= 0; 
        let mgmtFee= mgmtActive ? (annualRent * mgmtFeeRate / 100) : 0;
        let maintenance = ((monthlyMaintenanceFee || 0) * 12) * (floorKey === 'fullProperty' ? 9 : 1);
        let netIncome= annualRent - vacancyLoss - mgmtFee - maintenance;

        let annualROI=0;
        if(totalPurchase>0) {
          annualROI= Math.round((netIncome / totalPurchase) * 100);
        }
        let recovery= netIncome>0 ? (totalPurchase / netIncome).toFixed(1) : '‚àû';

        const tr= document.createElement('tr');
        tr.innerHTML=`
          <td>${scenarioName} <br><small>(${sqftPrice} MVR/sqft)</small></td>
          <td>${Math.round(monthlyRent).toLocaleString()}</td>
          <td>${Math.round(annualRent).toLocaleString()}</td>
          <td>${Math.round(netIncome).toLocaleString()}</td>
          <td>${annualROI}%</td>
          <td><strong>${recovery} yrs</strong></td>
        `;
        roiTableBody.appendChild(tr);
      });

      // If the 10-year breakdown is open, rebuild it
      if(document.getElementById('tenYearBreakdown').style.display==='block') {
        buildTenYearTables();
      }
    }

    /************************************************************
     * 3. TEN-YEAR BREAKDOWN (discrete vacancy)
     ************************************************************/
     function buildTenYearTables() {
    const container = document.getElementById('tenYearTables');
    container.innerHTML = '';
    const floorKey = document.getElementById('floorSelector').value;
    const floorData = floorPackages[floorKey];
    const mgmtActive = document.getElementById('mgmtFeeToggle').checked;
    const renovationActive = document.getElementById('renovationToggle').checked;

    // Add validation and logging
    console.log("Floor Data:", floorData);
    
    // Ensure floorData exists
    if (!floorData) {
        console.error("Floor data is undefined for key:", floorKey);
        return;
    }

    // Validate and sanitize input values
    const purchasePrice = Number(floorData.purchasePrice) || 0;
    const units = Number(floorData.units) || 1;
    const renovationCostPerUnit = Number(renovationCost) || 0;

    console.log("Purchase Price:", purchasePrice);
    console.log("Units:", units);
    console.log("Renovation Cost per Unit:", renovationCostPerUnit);

    // Calculate initial investment with validated numbers
    let initialInvestment = floorData.purchasePrice;
if (renovationActive) {
    initialInvestment += renovationCost;
}


    // Validate final result
    if (isNaN(initialInvestment)) {
        console.error("Initial investment calculation resulted in NaN");
        initialInvestment = 0;
    }

    console.log("Final Initial Investment:", initialInvestment);
    function calculateIncomeTax(profit, zakatAmount) {
        if (profit <= 500000) return 0;
        const taxableIncome = profit - zakatAmount;
        return taxableIncome > 500000 ? (taxableIncome - 500000) * 0.15 : 0;
    }

    function calculateZakat(operatingIncome) {
        return operatingIncome > 0 ? operatingIncome * 0.025 : 0;
    }

    container.style.cssText = `
        background-color: var(--card-color);
        color: var(--text-color);
        padding: 2rem;
        border-radius: 8px;
        font-family: var(--font-family);
    `;

    Object.entries(scenarioRates).forEach(([scenarioName, sqftPrice]) => {
        const scenarioDiv = document.createElement('div');
        scenarioDiv.style.marginBottom = '3rem';

        scenarioDiv.innerHTML = `
            <h3 style="color: var(--accent-color); margin-bottom: 1rem;">Long-term Financial Analysis</h3>
            <p style="color: var(--text-color); margin-bottom: 1rem;">
                Except for the Monthly Rent, all other figures stated are on a yearly basis.<br>
                <span style="color: var(--accent-color);">*Highlighted years (10, 20, 30) include cumulative effects from previous years</span>
            </p>
            <h4 style="color: var(--text-color); margin-bottom: 0.5rem;">${scenarioName} Scenario Financial Analysis</h4>
            <p style="color: var(--text-color); margin-bottom: 1.5rem;">
                Rate: ${sqftPrice} MVR/sqft | Floor Area: ${floorData.sqft} sqft | Number of Units: ${floorData.units}<br>
                Initial Investment: ${initialInvestment.toLocaleString()} MVR
            </p>
        `;

        const table = document.createElement('table');
        table.style.cssText = `
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 2rem;
            font-size: 14px;
            font-family: var(--font-family);
        `;

        // Calculate all years internally but only display selected years
        let monthlyRent = sqftPrice * floorData.sqft;
        let cumulativeCashFlow = -initialInvestment;
        let displayYears = [1, 2, 3, 4, 5, 10, 20, 30];
        let allData = [];

        // Calculate data for all years up to 30
        for (let year = 1; year <= 30; year++) {
    let effectiveRent = monthlyRent * Math.pow(1 + rentIncreaseRate, Math.floor(year / 2));

    const annualRent = effectiveRent * 12;
    const vacancy = (year === 1) ? 0 : ((year % 3 === 0) ? (annualRent * 0.02) : 0);
    const mgmtFee = mgmtActive ? (annualRent * mgmtFeeRate / 100) : 0;
    const maintenance = ((monthlyMaintenanceFee || 0) * 12) * (floorKey === 'fullProperty' ? 9 : (floorData.units || 1));

    const renovation = (year % 3 === 0) ? (annualRent * 0.05) : 0;

    const totalExpenses = ((vacancy || 0) + (mgmtFee || 0) + (maintenance || 0) + (renovation || 0)) || 0;
    const operatingIncome = ((annualRent || 0) - (totalExpenses || 0)) || 0;

    const zakat = calculateZakat(operatingIncome);
    const incomeTax = calculateIncomeTax(operatingIncome, zakat);
    const netIncome = ((operatingIncome || 0) - (incomeTax || 0) - (zakat || 0)) || 0;

    cumulativeCashFlow = ((cumulativeCashFlow || 0) + (netIncome || 0)) || 0;

    console.log(`Year ${year}: Rent: ${annualRent}, Expenses: ${totalExpenses}, Net Income: ${netIncome}, Cumulative Cash Flow: ${cumulativeCashFlow}`);

    const yearData = {
        year,
        annualRent,
        vacancy,
        mgmtFee,
        maintenance,
        renovation,
        operatingIncome,
        zakat,
        incomeTax,
        netIncome,
        cumulativeCashFlow
    };

    allData.push(yearData);
}

// Now filtering works correctly
let data = allData.filter(d => displayYears.includes(d.year));

        // Build header with milestone year highlighting
        let headerRow = `
            <tr>
                <th style="
                    background-color: var(--accent-color); 
                    color: var(--card-color); 
                    padding: 0.75rem 1rem; 
                    text-align: left; 
                    width: 160px;
                ">Financial Metrics</th>
                ${data.map(d => `
                    <th style="
                        background-color: ${[10, 20, 30].includes(d.year) ? 'var(--accent-color)' : 'var(--accent-color)'};
                        opacity: ${[10, 20, 30].includes(d.year) ? '1' : '0.8'}; 
                        color: var(--card-color);
                        padding: 0.75rem 1rem; 
                        text-align: right;
                    ">Year ${d.year}${[10, 20, 30].includes(d.year) ? '*' : ''}</th>
                `).join('')}
            </tr>
        `;

        const createRow = (label, values, color = 'inherit') => `
    <tr style="border-bottom: 1px solid var(--border-color)">
        <td style="padding: 0.75rem 1rem; color: ${color};">${label}</td>
        ${values.map((v, i) => `
            <td style="
                padding: 0.75rem 1rem; 
                text-align: right; 
                color: ${color};
                ${[10, 20, 30].includes(data[i].year) ? 'background-color: rgba(14, 172, 159, 0.1);' : ''}
            ">
                ${Math.round(v).toLocaleString()}
            </td>
        `).join('')}
    </tr>
`;

        let tableContent = `
            <thead>${headerRow}</thead>
            <tbody>
                <tr>
                    <td colspan="${data.length + 1}" style="padding: 0.75rem 1rem; color: var(--accent-color);">Income</td>
                </tr>
                ${createRow('Rental Income', data.map(d => d.annualRent))}
                
                <tr>
    <td colspan="${data.length + 1}" style="padding: 0.75rem 1rem; color: #ff4444;">Expenses</td>
</tr>
${createRow('Vacancy Loss', data.map(d => d.vacancy))}
${createRow('Management Fee', data.map(d => d.mgmtFee))}
${createRow('Maintenance Cost', data.map(d => d.maintenance))}
${createRow('Property Renovation', data.map(d => d.renovation))}
${createRow('Total Expenses', data.map(d => d.vacancy + d.mgmtFee + d.maintenance + d.renovation
), '#ff4444')}

${createRow('Net Operating Income', data.map(d => d.operatingIncome), '#2ecc71')}
${createRow('Zakat (2.5%)', data.map(d => d.zakat), '#ff6b6b')}
${createRow('Income Tax (15%)', data.map(d => d.incomeTax), '#ff6b6b')}
${createRow('Net Income', data.map(d => d.netIncome), '#2ecc71')}
                ${createRow('Cumulative Cash Flow', data.map(d => d.cumulativeCashFlow))}
            </tbody>
        `;

        table.innerHTML = tableContent;
        scenarioDiv.appendChild(table);

        // Add financial indicators
        const averageNOI = allData.slice(0, 5).reduce((acc, d) => acc + d.operatingIncome, 0) / 5;
        const totalRevenue = allData.reduce((acc, d) => acc + d.annualRent, 0);
        const occupancyRate = (1 - (allData.reduce((acc, d) => acc + d.vacancy, 0) / totalRevenue)) * 100;

        scenarioDiv.innerHTML += `
            <div>
                <h4 style="color: var(--text-color); margin-bottom: 1rem;">Key Financial Indicators:</h4>
                <ul style="list-style: none; padding-left: 0; color: var(--text-color);">
                    <li>‚Ä¢ Initial Investment: ${initialInvestment.toLocaleString()} MVR</li>
                    <li>‚Ä¢ Average Annual NOI (First 5 Years): ${Math.round(averageNOI).toLocaleString()} MVR</li>
                    <li>‚Ä¢ Average Occupancy Rate: ${Math.round(occupancyRate)}%</li>
                </ul>
            </div>
        `;

        container.appendChild(scenarioDiv);
    });
    }
    

    function toggleTenYearBreakdown() {
        const div = document.getElementById('tenYearBreakdown');
        if (div.style.display === '' || div.style.display === 'none') {
            div.style.display = 'block';
            buildTenYearTables();
        } else {
            div.style.display = 'none';
        }
    }
    /************************************************************
     * 4. EXIT STRATEGY
     ************************************************************/
    function buildExitTables() {
      const shortTermBody= document.getElementById('shortTermBody');
      const midTermBody= document.getElementById('midTermBody');
      const longTermBody= document.getElementById('longTermBody');
      
      shortTermBody.innerHTML= '';
      midTermBody.innerHTML= '';
      longTermBody.innerHTML= '';

      Object.entries(scenarioRates).forEach(([scenarioName, sqftPrice])=>{
        // short => 6 yrs
        const shortVal= exitCalc(scenarioName, sqftPrice, 6);
        // mid => 15 yrs
        const midVal= exitCalc(scenarioName, sqftPrice, 15);
        // long => 25 yrs
        const longVal= exitCalc(scenarioName, sqftPrice, 25);

        const sTR= document.createElement('tr');
        sTR.innerHTML=`
          <td>${scenarioName}</td>
          <td>6</td>
          <td>${shortVal.totalRent.toLocaleString()}</td>
          <td>${shortVal.resaleValue.toLocaleString()}</td>
          <td>${shortVal.profit.toLocaleString()}</td>
        `;
        shortTermBody.appendChild(sTR);

        const mTR= document.createElement('tr');
        mTR.innerHTML=`
          <td>${scenarioName}</td>
          <td>15</td>
          <td>${midVal.totalRent.toLocaleString()}</td>
          <td>${midVal.resaleValue.toLocaleString()}</td>
          <td>${midVal.profit.toLocaleString()}</td>
        `;
        midTermBody.appendChild(mTR);

        const lTR= document.createElement('tr');
        lTR.innerHTML=`
          <td>${scenarioName}</td>
          <td>25</td>
          <td>${longVal.totalRent.toLocaleString()}</td>
          <td>${longVal.resaleValue.toLocaleString()}</td>
          <td>${longVal.profit.toLocaleString()}</td>
        `;
        longTermBody.appendChild(lTR);
      });
    }

    function exitCalc(scenarioName, sqftPrice, yrs) {
      const floorKey= document.getElementById('floorSelector').value;
      const floorData= floorPackages[floorKey];
      const mgmtActive= document.getElementById('mgmtFeeToggle').checked;
      const renovationActive= document.getElementById('renovationToggle').checked;

      let basePrice= floorData.purchasePrice;
      if(renovationActive) basePrice += renovationCost;

      // appreciation every 2 years by 2%
      let periods= Math.floor(yrs/2);
      let finalVal= basePrice;
      for(let i=0; i<periods; i++){
        finalVal *= (1 + rentIncreaseRate);
      }

      // net rent w/ discrete vacancy
      let monthlyRent= sqftPrice * floorData.sqft;
      let totalRent=0;
      for(let y=1; y<= yrs; y++){
        if(y>1 && (y%2===1)) {
          monthlyRent *= (1 + rentIncreaseRate);
        }
        let annualRent= monthlyRent * 12;
        let vacancy= (y%3===0) ? (annualRent * 0.02) : 0; 
        let mgmtFeeVal= mgmtActive ? (annualRent * mgmtFeeRate / 100) : 0;
        let maintenance = ((monthlyMaintenanceFee || 0) * 12) * (floorKey === 'fullProperty' ? 9 : 1);
        let net= annualRent - vacancy - mgmtFeeVal - maintenance;
        totalRent += net;
      }
      let profit= (finalVal + totalRent) - basePrice;

      return {
        totalRent: Math.round(totalRent),
        resaleValue: Math.round(finalVal),
        profit: Math.round(profit)
      };
    }

    /************************************************************
     * 5. MORTGAGE 
     ************************************************************/
    function toggleMortgage(){
      const sec= document.getElementById('mortgageSection');
      sec.style.display= (sec.style.display===''|| sec.style.display==='none')? 'block': 'none';
    }

    // Update the label & table on slider move
    function downPaymentSlider(){
      const dpRange= document.getElementById('downPaymentRange');
      const dpLabel= document.getElementById('downPaymentLabel');
      dpLabel.textContent= dpRange.value + '%';
      updateDownPaymentInfo();
      buildMortgageTable();
    }

    function updateDownPaymentInfo(){
      const dpVal= parseFloat(document.getElementById('downPaymentRange').value)||20;
      const mortgageOption= document.getElementById('mortgageOption').value;

      let price=0;
      if(mortgageOption==='fullProp') price=65340000;
      else if(mortgageOption==='ground') price=14580000;
      else price=7020000;

      let dpAmount= Math.round(price * (dpVal / 100));
      let financed= price - dpAmount;

      document.getElementById('loanAmount').textContent= financed.toLocaleString();
      document.getElementById('equityAmount').textContent= dpAmount.toLocaleString();
    }

    function buildMortgageTable(){
      const mortgageTableBody= document.querySelector('#mortgageTable tbody');
      mortgageTableBody.innerHTML= '';

      const mortgageOption= document.getElementById('mortgageOption').value;
      const interestRate= parseFloat(document.getElementById('interestRate').value)/100 || 0.105;
      const loanYears= parseInt(document.getElementById('loanYears').value) || 15;

      const dpVal= parseFloat(document.getElementById('downPaymentRange').value)||20;

      let price=0;
      if(mortgageOption==='fullProp') price=65340000;
      else if(mortgageOption==='ground') price=14580000;
      else price=7020000;

      let downPayment= Math.round(price * (dpVal / 100));
      let financedAmount= price - downPayment;

      // show summary above table
      const summary= document.getElementById('mortgageSummaryText');
      summary.innerHTML=`
        Property Price (incl. GST): ${price.toLocaleString()} 
        | Down Payment (${dpVal}%): ${downPayment.toLocaleString()}
        | Loan Amount: ${financedAmount.toLocaleString()}
      `;

      let monthlyRate= interestRate / 12;
      let numMonths= loanYears * 12;
      let monthlyPayment=0;
      if(monthlyRate>0){
        monthlyPayment= financedAmount * (monthlyRate / (1 - Math.pow(1 + monthlyRate, -numMonths)));
      } else {
        monthlyPayment= financedAmount / numMonths;
      }
      let balance= financedAmount;

      for(let m=1; m<=numMonths; m++){
        let interestPortion= balance * monthlyRate;
        let principalPortion= monthlyPayment - interestPortion;
        balance -= principalPortion;
        if(balance < 0) balance = 0;

        const row= document.createElement('tr');
        row.innerHTML=`
          <td>${m}</td>
          <td>${Math.round(monthlyPayment).toLocaleString()}</td>
          <td>${Math.round(interestPortion).toLocaleString()}</td>
          <td>${Math.round(principalPortion).toLocaleString()}</td>
          <td>${Math.round(balance).toLocaleString()}</td>
        `;
        mortgageTableBody.appendChild(row);
        if(balance <= 0) break;
      }
    }
    
    
    function openLightbox(image) {
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightbox-img');
  lightbox.style.display = 'flex'; // Show lightbox
  lightboxImg.src = image.src; // Set the image in the lightbox
}

function closeLightbox(event) {
  event.stopPropagation(); // Prevent event bubbling
  const lightbox = document.getElementById('lightbox');
  lightbox.style.display = 'none'; // Hide lightbox
}
    /************************************************************
     * 6. SLIDER IMAGES
     ************************************************************/
    let currentSlide=0;
    const totalSlides=2; // for the first Maps slider
    function showSlide(index){
      const sliderWrapper= document.getElementById('sliderWrapper');
      if(!sliderWrapper) return;
      if(index<0) index= totalSlides-1;
      if(index>= totalSlides) index=0;
      currentSlide= index;
      const offset= -1 * currentSlide * parseInt(getComputedStyle(sliderWrapper).width) / totalSlides;
      sliderWrapper.style.transform= 'translateX('+ offset +'px)';
    }
    function prevSlide(){ showSlide(currentSlide-1);}
    function nextSlide(){ showSlide(currentSlide+1);}

    /************************************************************
     * 7. INIT & Reveal Animations
     ************************************************************/
    function init() {
      // ROI + EXIT TABLE INIT
      document.getElementById('floorSelector').addEventListener('change', updateROI);
      document.getElementById('mgmtFeeToggle').addEventListener('change', updateROI);
      document.getElementById('renovationToggle').addEventListener('change', updateROI);

      document.getElementById('mortgageOption').addEventListener('change', ()=> {
        updateDownPaymentInfo();
        buildMortgageTable();
      });
      document.getElementById('interestRate').addEventListener('change', buildMortgageTable);
      document.getElementById('loanYears').addEventListener('change', buildMortgageTable);
      document.getElementById('downPaymentRange').addEventListener('input', downPaymentSlider);

      updateROI();
      buildExitTables();
      updateDownPaymentInfo();
      buildMortgageTable();
      showSlide(0);

      // Theme Toggle
      const themeSwitch= document.getElementById('themeSwitch');
      themeSwitch.addEventListener('change', toggleTheme);

      // Apply saved theme preference
      const savedTheme= localStorage.getItem('theme') || 'dark';
      if(savedTheme === 'light'){
        document.body.classList.add('light-mode');
        themeSwitch.checked = true;
      } else {
        document.body.classList.remove('light-mode');
        themeSwitch.checked = false;
      }

      // Intersection Observer for reveals
      const revealObserver = new IntersectionObserver((entries)=>{
        entries.forEach(entry=>{
          if(entry.isIntersecting){
            entry.target.classList.add('active');
          }
        });
      }, {
        threshold: 0.1
      });

      // Observe all .reveal elements
      document.querySelectorAll('.reveal').forEach(el=>{
        revealObserver.observe(el);
      });

      // Observe the sliders so they fade in
      document.querySelectorAll('.slider-container').forEach(slider=>{
        revealObserver.observe(slider);
      });
    }

    function toggleTheme() {
    document.body.classList.toggle('light-mode');
    if(document.body.classList.contains('light-mode')){
        localStorage.setItem('theme', 'light');
    } else {
        localStorage.setItem('theme', 'dark');
    }
}
  </script>

</body>
</html>
